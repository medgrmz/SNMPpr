{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useGridEditing = exports.editingStateInitializer = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _useGridApiMethod = require(\"../../utils/useGridApiMethod\");\nvar _useGridCellEditing = require(\"./useGridCellEditing\");\nvar _gridEditRowModel = require(\"../../../models/gridEditRowModel\");\nvar _useGridRowEditing = require(\"./useGridRowEditing\");\nvar _gridEditingSelectors = require(\"./gridEditingSelectors\");\nvar _gridRowsUtils = require(\"../rows/gridRowsUtils\");\nconst editingStateInitializer = state => (0, _extends2.default)({}, state, {\n  editRows: {}\n});\nexports.editingStateInitializer = editingStateInitializer;\nconst useGridEditing = (apiRef, props) => {\n  (0, _useGridCellEditing.useGridCellEditing)(apiRef, props);\n  (0, _useGridRowEditing.useGridRowEditing)(apiRef, props);\n  const debounceMap = React.useRef({});\n  const {\n    isCellEditable: isCellEditableProp\n  } = props;\n  const isCellEditable = React.useCallback(params => {\n    if ((0, _gridRowsUtils.isAutogeneratedRowNode)(params.rowNode)) {\n      return false;\n    }\n    if (!params.colDef.editable) {\n      return false;\n    }\n    if (!params.colDef.renderEditCell) {\n      return false;\n    }\n    if (isCellEditableProp) {\n      return isCellEditableProp(params);\n    }\n    return true;\n  }, [isCellEditableProp]);\n  const maybeDebounce = (id, field, debounceMs, callback) => {\n    if (!debounceMs) {\n      callback();\n      return;\n    }\n    if (!debounceMap.current[id]) {\n      debounceMap.current[id] = {};\n    }\n    if (debounceMap.current[id][field]) {\n      const [timeout] = debounceMap.current[id][field];\n      clearTimeout(timeout);\n    }\n\n    // To run the callback immediately without waiting the timeout\n    const runImmediately = () => {\n      const [timeout] = debounceMap.current[id][field];\n      clearTimeout(timeout);\n      callback();\n      delete debounceMap.current[id][field];\n    };\n    const timeout = setTimeout(() => {\n      callback();\n      delete debounceMap.current[id][field];\n    }, debounceMs);\n    debounceMap.current[id][field] = [timeout, runImmediately];\n  };\n  React.useEffect(() => {\n    const debounces = debounceMap.current;\n    return () => {\n      Object.entries(debounces).forEach(([id, fields]) => {\n        Object.keys(fields).forEach(field => {\n          const [timeout] = debounces[id][field];\n          clearTimeout(timeout);\n          delete debounces[id][field];\n        });\n      });\n    };\n  }, []);\n  const runPendingEditCellValueMutation = React.useCallback((id, field) => {\n    if (!debounceMap.current[id]) {\n      return;\n    }\n    if (!field) {\n      Object.keys(debounceMap.current[id]).forEach(debouncedField => {\n        const [, runCallback] = debounceMap.current[id][debouncedField];\n        runCallback();\n      });\n    } else if (debounceMap.current[id][field]) {\n      const [, runCallback] = debounceMap.current[id][field];\n      runCallback();\n    }\n  }, []);\n  const setEditCellValue = React.useCallback(params => {\n    const {\n      id,\n      field,\n      debounceMs\n    } = params;\n    return new Promise(resolve => {\n      maybeDebounce(id, field, debounceMs, async () => {\n        const setEditCellValueToCall = props.editMode === _gridEditRowModel.GridEditModes.Row ? apiRef.current.setRowEditingEditCellValue : apiRef.current.setCellEditingEditCellValue;\n\n        // Check if the cell is in edit mode\n        // By the time this callback runs the user may have cancelled the editing\n        if (apiRef.current.getCellMode(id, field) === _gridEditRowModel.GridCellModes.Edit) {\n          const result = await setEditCellValueToCall(params);\n          resolve(result);\n        }\n      });\n    });\n  }, [apiRef, props.editMode]);\n  const getRowWithUpdatedValues = React.useCallback((id, field) => {\n    return props.editMode === _gridEditRowModel.GridEditModes.Cell ? apiRef.current.getRowWithUpdatedValuesFromCellEditing(id, field) : apiRef.current.getRowWithUpdatedValuesFromRowEditing(id);\n  }, [apiRef, props.editMode]);\n  const getEditCellMeta = React.useCallback((id, field) => {\n    const editingState = (0, _gridEditingSelectors.gridEditRowsStateSelector)(apiRef);\n    return editingState[id]?.[field] ?? null;\n  }, [apiRef]);\n  const editingSharedApi = {\n    isCellEditable,\n    setEditCellValue,\n    getRowWithUpdatedValues,\n    unstable_getEditCellMeta: getEditCellMeta\n  };\n  const editingSharedPrivateApi = {\n    runPendingEditCellValueMutation\n  };\n  (0, _useGridApiMethod.useGridApiMethod)(apiRef, editingSharedApi, 'public');\n  (0, _useGridApiMethod.useGridApiMethod)(apiRef, editingSharedPrivateApi, 'private');\n};\nexports.useGridEditing = useGridEditing;","map":{"version":3,"names":["_interopRequireWildcard","require","default","_interopRequireDefault","Object","defineProperty","exports","value","useGridEditing","editingStateInitializer","_extends2","React","_useGridApiMethod","_useGridCellEditing","_gridEditRowModel","_useGridRowEditing","_gridEditingSelectors","_gridRowsUtils","state","editRows","apiRef","props","useGridCellEditing","useGridRowEditing","debounceMap","useRef","isCellEditable","isCellEditableProp","useCallback","params","isAutogeneratedRowNode","rowNode","colDef","editable","renderEditCell","maybeDebounce","id","field","debounceMs","callback","current","timeout","clearTimeout","runImmediately","setTimeout","useEffect","debounces","entries","forEach","fields","keys","runPendingEditCellValueMutation","debouncedField","runCallback","setEditCellValue","Promise","resolve","setEditCellValueToCall","editMode","GridEditModes","Row","setRowEditingEditCellValue","setCellEditingEditCellValue","getCellMode","GridCellModes","Edit","result","getRowWithUpdatedValues","Cell","getRowWithUpdatedValuesFromCellEditing","getRowWithUpdatedValuesFromRowEditing","getEditCellMeta","editingState","gridEditRowsStateSelector","editingSharedApi","unstable_getEditCellMeta","editingSharedPrivateApi","useGridApiMethod"],"sources":["C:/Users/MSI GF75 THIN 10SC/OneDrive/Bureau/fffffffff/node_modules/@mui/x-data-grid/hooks/features/editing/useGridEditing.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\").default;\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useGridEditing = exports.editingStateInitializer = void 0;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _useGridApiMethod = require(\"../../utils/useGridApiMethod\");\nvar _useGridCellEditing = require(\"./useGridCellEditing\");\nvar _gridEditRowModel = require(\"../../../models/gridEditRowModel\");\nvar _useGridRowEditing = require(\"./useGridRowEditing\");\nvar _gridEditingSelectors = require(\"./gridEditingSelectors\");\nvar _gridRowsUtils = require(\"../rows/gridRowsUtils\");\nconst editingStateInitializer = state => (0, _extends2.default)({}, state, {\n  editRows: {}\n});\nexports.editingStateInitializer = editingStateInitializer;\nconst useGridEditing = (apiRef, props) => {\n  (0, _useGridCellEditing.useGridCellEditing)(apiRef, props);\n  (0, _useGridRowEditing.useGridRowEditing)(apiRef, props);\n  const debounceMap = React.useRef({});\n  const {\n    isCellEditable: isCellEditableProp\n  } = props;\n  const isCellEditable = React.useCallback(params => {\n    if ((0, _gridRowsUtils.isAutogeneratedRowNode)(params.rowNode)) {\n      return false;\n    }\n    if (!params.colDef.editable) {\n      return false;\n    }\n    if (!params.colDef.renderEditCell) {\n      return false;\n    }\n    if (isCellEditableProp) {\n      return isCellEditableProp(params);\n    }\n    return true;\n  }, [isCellEditableProp]);\n  const maybeDebounce = (id, field, debounceMs, callback) => {\n    if (!debounceMs) {\n      callback();\n      return;\n    }\n    if (!debounceMap.current[id]) {\n      debounceMap.current[id] = {};\n    }\n    if (debounceMap.current[id][field]) {\n      const [timeout] = debounceMap.current[id][field];\n      clearTimeout(timeout);\n    }\n\n    // To run the callback immediately without waiting the timeout\n    const runImmediately = () => {\n      const [timeout] = debounceMap.current[id][field];\n      clearTimeout(timeout);\n      callback();\n      delete debounceMap.current[id][field];\n    };\n    const timeout = setTimeout(() => {\n      callback();\n      delete debounceMap.current[id][field];\n    }, debounceMs);\n    debounceMap.current[id][field] = [timeout, runImmediately];\n  };\n  React.useEffect(() => {\n    const debounces = debounceMap.current;\n    return () => {\n      Object.entries(debounces).forEach(([id, fields]) => {\n        Object.keys(fields).forEach(field => {\n          const [timeout] = debounces[id][field];\n          clearTimeout(timeout);\n          delete debounces[id][field];\n        });\n      });\n    };\n  }, []);\n  const runPendingEditCellValueMutation = React.useCallback((id, field) => {\n    if (!debounceMap.current[id]) {\n      return;\n    }\n    if (!field) {\n      Object.keys(debounceMap.current[id]).forEach(debouncedField => {\n        const [, runCallback] = debounceMap.current[id][debouncedField];\n        runCallback();\n      });\n    } else if (debounceMap.current[id][field]) {\n      const [, runCallback] = debounceMap.current[id][field];\n      runCallback();\n    }\n  }, []);\n  const setEditCellValue = React.useCallback(params => {\n    const {\n      id,\n      field,\n      debounceMs\n    } = params;\n    return new Promise(resolve => {\n      maybeDebounce(id, field, debounceMs, async () => {\n        const setEditCellValueToCall = props.editMode === _gridEditRowModel.GridEditModes.Row ? apiRef.current.setRowEditingEditCellValue : apiRef.current.setCellEditingEditCellValue;\n\n        // Check if the cell is in edit mode\n        // By the time this callback runs the user may have cancelled the editing\n        if (apiRef.current.getCellMode(id, field) === _gridEditRowModel.GridCellModes.Edit) {\n          const result = await setEditCellValueToCall(params);\n          resolve(result);\n        }\n      });\n    });\n  }, [apiRef, props.editMode]);\n  const getRowWithUpdatedValues = React.useCallback((id, field) => {\n    return props.editMode === _gridEditRowModel.GridEditModes.Cell ? apiRef.current.getRowWithUpdatedValuesFromCellEditing(id, field) : apiRef.current.getRowWithUpdatedValuesFromRowEditing(id);\n  }, [apiRef, props.editMode]);\n  const getEditCellMeta = React.useCallback((id, field) => {\n    const editingState = (0, _gridEditingSelectors.gridEditRowsStateSelector)(apiRef);\n    return editingState[id]?.[field] ?? null;\n  }, [apiRef]);\n  const editingSharedApi = {\n    isCellEditable,\n    setEditCellValue,\n    getRowWithUpdatedValues,\n    unstable_getEditCellMeta: getEditCellMeta\n  };\n  const editingSharedPrivateApi = {\n    runPendingEditCellValueMutation\n  };\n  (0, _useGridApiMethod.useGridApiMethod)(apiRef, editingSharedApi, 'public');\n  (0, _useGridApiMethod.useGridApiMethod)(apiRef, editingSharedPrivateApi, 'private');\n};\nexports.useGridEditing = useGridEditing;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}